<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>第 3 章 文件操作 | 现代应用统计与 R 语言</title>
<meta name="author" content="黄湘云">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs/header-attrs.js"></script><script src="libs/jquery/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap/bootstrap.bundle.min.js"></script><script src="libs/bs3compat/tabs.js"></script><script src="libs/bs3compat/bs3compat.js"></script><link href="libs/bs4_book/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book/bs4_book.js"></script><script src="libs/htmlwidgets/htmlwidgets.js"></script><script src="libs/plotly-binding/plotly.js"></script><script src="libs/typedarray/typedarray.min.js"></script><link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main/plotly-latest.min.js"></script><script src="libs/proj4js/proj4.js"></script><link href="libs/highcharts/css/motion.css" rel="stylesheet">
<script src="libs/highcharts/highcharts.js"></script><script src="libs/highcharts/highcharts-3d.js"></script><script src="libs/highcharts/highcharts-more.js"></script><script src="libs/highcharts/modules/stock.js"></script><script src="libs/highcharts/modules/map.js"></script><script src="libs/highcharts/modules/annotations.js"></script><script src="libs/highcharts/modules/data.js"></script><script src="libs/highcharts/modules/drilldown.js"></script><script src="libs/highcharts/modules/item-series.js"></script><script src="libs/highcharts/modules/offline-exporting.js"></script><script src="libs/highcharts/modules/overlapping-datalabels.js"></script><script src="libs/highcharts/modules/exporting.js"></script><script src="libs/highcharts/modules/export-data.js"></script><script src="libs/highcharts/modules/funnel.js"></script><script src="libs/highcharts/modules/heatmap.js"></script><script src="libs/highcharts/modules/treemap.js"></script><script src="libs/highcharts/modules/sankey.js"></script><script src="libs/highcharts/modules/dependency-wheel.js"></script><script src="libs/highcharts/modules/organization.js"></script><script src="libs/highcharts/modules/solid-gauge.js"></script><script src="libs/highcharts/modules/streamgraph.js"></script><script src="libs/highcharts/modules/sunburst.js"></script><script src="libs/highcharts/modules/vector.js"></script><script src="libs/highcharts/modules/wordcloud.js"></script><script src="libs/highcharts/modules/xrange.js"></script><script src="libs/highcharts/modules/tilemap.js"></script><script src="libs/highcharts/modules/venn.js"></script><script src="libs/highcharts/modules/gantt.js"></script><script src="libs/highcharts/modules/timeline.js"></script><script src="libs/highcharts/modules/parallel-coordinates.js"></script><script src="libs/highcharts/modules/bullet.js"></script><script src="libs/highcharts/modules/coloraxis.js"></script><script src="libs/highcharts/modules/dumbbell.js"></script><script src="libs/highcharts/modules/lollipop.js"></script><script src="libs/highcharts/modules/series-label.js"></script><script src="libs/highcharts/plugins/motion.js"></script><script src="libs/highcharts/custom/reset.js"></script><script src="libs/highcharts/modules/boost.js"></script><script src="libs/highchart-binding/highchart.js"></script><script src="libs/es6shim/es6shim.js"></script><script src="libs/es7shim/es7shim.js"></script><script src="libs/graphre/graphre.js"></script><script src="libs/nomnoml/nomnoml.js"></script><script src="libs/nomnoml-binding/nomnoml.js"></script><script src="libs/plotly-locale-zh-CN/zh-cn.js"></script><script src="libs/mathjax/cdn.js"></script><link href="libs/dygraphs/dygraph.css" rel="stylesheet">
<script src="libs/dygraphs/dygraph-combined.js"></script><script src="libs/dygraphs/shapes.js"></script><script src="libs/moment/moment.js"></script><script src="libs/moment-timezone/moment-timezone-with-data.js"></script><script src="libs/moment-fquarter/moment-fquarter.min.js"></script><script src="libs/dygraphs-binding/dygraphs.js"></script><script src="libs/Dygraph.Plugins.Unzoom/unzoom.js"></script><script src="libs/echarts4r/echarts-en.min.js"></script><script src="libs/echarts4r/ecStat.min.js"></script><script src="libs/echarts4r/dataTool.min.js"></script><script src="libs/echarts4r-binding/echarts4r.js"></script><script src="libs/echarts-world/world.js"></script><script src="libs/d3/d3.min.js"></script><script src="libs/forceNetwork-binding/forceNetwork.js"></script><link href="libs/vis/vis.css" rel="stylesheet">
<script src="libs/vis/vis.min.js"></script><script src="libs/visNetwork-binding/visNetwork.js"></script><script src="libs/FileSaver/FileSaver.min.js"></script><script src="libs/Blob/Blob.js"></script><script src="libs/canvas-toBlob/canvas-toBlob.js"></script><script src="libs/html2canvas/html2canvas.js"></script><script src="libs/jspdf/jspdf.debug.js"></script><link href="libs/jquery-sparkline/jquery.sparkline.css" rel="stylesheet">
<script src="libs/jquery-sparkline/jquery.sparkline.js"></script><script src="libs/sparkline-binding/sparkline.js"></script><script src="libs/r2d3-render/r2d3-render.js"></script><script src="libs/webcomponents/webcomponents.js"></script><script src="libs/r2d3-binding/r2d3.js"></script><script src="libs/d3v6/d3.min.js"></script><link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding/datatables.js"></script><link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core/js/jquery.dataTables.min.js"></script><script src="libs/jszip/jszip.min.js"></script><script src="libs/pdfmake/pdfmake.js"></script><script src="libs/pdfmake/vfs_fonts.js"></script><link href="libs/dt-ext-buttons/css/buttons.dataTables.min.css" rel="stylesheet">
<script src="libs/dt-ext-buttons/js/dataTables.buttons.min.js"></script><script src="libs/dt-ext-buttons/js/buttons.flash.min.js"></script><script src="libs/dt-ext-buttons/js/buttons.html5.min.js"></script><script src="libs/dt-ext-buttons/js/buttons.colVis.min.js"></script><script src="libs/dt-ext-buttons/js/buttons.print.min.js"></script><link href="libs/dt-ext-rowgroup/css/rowGroup.dataTables.min.css" rel="stylesheet">
<script src="libs/dt-ext-rowgroup/js/dataTables.rowGroup.min.js"></script><script src="libs/kePrint/kePrint.js"></script><link href="libs/lightable/lightable.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-54GQKWF7VP"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-54GQKWF7VP');
    </script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">现代应用统计与 R 语言</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">欢迎</a></li>
<li><a class="" href="chap-preface.html"><span class="header-section-number">1</span> 前言</a></li>
<li><a class="" href="chap-notations.html"><span class="header-section-number">2</span> 符号说明</a></li>
<li><a class="active" href="chap-file-operations.html"><span class="header-section-number">3</span> 文件操作</a></li>
<li><a class="" href="chap-data-structure.html"><span class="header-section-number">4</span> 数据结构</a></li>
<li><a class="" href="chap-data-manipulation.html"><span class="header-section-number">5</span> 数据操作</a></li>
<li><a class="" href="chap-data-transportation.html"><span class="header-section-number">6</span> 数据搬运</a></li>
<li><a class="" href="chap-graphics-foundations.html"><span class="header-section-number">7</span> 图形基础</a></li>
<li><a class="" href="chap-data-visualization.html"><span class="header-section-number">8</span> 数据可视化</a></li>
<li><a class="" href="chap-dynamic-documents.html"><span class="header-section-number">9</span> 动态文档</a></li>
<li><a class="" href="chap-interactive-web-graphics.html"><span class="header-section-number">10</span> 交互图形</a></li>
<li><a class="" href="chap-interactive-data-tables.html"><span class="header-section-number">11</span> 交互表格</a></li>
<li><a class="" href="chap-interactive-shiny-app.html"><span class="header-section-number">12</span> 交互报表</a></li>
<li><a class="" href="chap-string-operations.html"><span class="header-section-number">13</span> 字符串操作</a></li>
<li><a class="" href="chap-regular-expressions.html"><span class="header-section-number">14</span> 正则表达式</a></li>
<li><a class="" href="chap-text-analysis.html"><span class="header-section-number">15</span> 文本分析</a></li>
<li><a class="" href="chap-sampling-distributions.html"><span class="header-section-number">16</span> 抽样分布</a></li>
<li><a class="" href="chap-parameter-estimators.html"><span class="header-section-number">17</span> 参数估计</a></li>
<li><a class="" href="chap-hypothesis-test.html"><span class="header-section-number">18</span> 假设检验</a></li>
<li><a class="" href="chap-power-Analysis.html"><span class="header-section-number">19</span> 功效分析</a></li>
<li><a class="" href="chap-experimental-design.html"><span class="header-section-number">20</span> 试验设计</a></li>
<li><a class="" href="chap-linear-models.html"><span class="header-section-number">21</span> 线性模型</a></li>
<li><a class="" href="chap-generalized-linear-models.html"><span class="header-section-number">22</span> 广义线性模型</a></li>
<li><a class="" href="chap-case-study.html"><span class="header-section-number">23</span> 案例研究</a></li>
<li><a class="" href="chap-data-explorer.html"><span class="header-section-number">24</span> 数据探索</a></li>
<li><a class="" href="chap-survival-analysis.html"><span class="header-section-number">25</span> 生存分析</a></li>
<li><a class="" href="chap-time-series-analysis.html"><span class="header-section-number">26</span> 时序分析</a></li>
<li><a class="" href="chap-spatial-analysis.html"><span class="header-section-number">27</span> 空间分析</a></li>
<li><a class="" href="chap-spatial-modeling.html"><span class="header-section-number">28</span> 空间建模</a></li>
<li><a class="" href="chap-bayesian-models.html"><span class="header-section-number">29</span> 贝叶斯模型</a></li>
<li><a class="" href="chap-gradient-boosting-machine.html"><span class="header-section-number">30</span> 梯度提升机</a></li>
<li><a class="" href="chap-neural-network.html"><span class="header-section-number">31</span> 神经网络</a></li>
<li><a class="" href="chap-matrix-operations.html"><span class="header-section-number">32</span> 矩阵运算</a></li>
<li><a class="" href="chap-symbolic-computation.html"><span class="header-section-number">33</span> 符号计算</a></li>
<li><a class="" href="chap-numerical-optimization.html"><span class="header-section-number">34</span> 数值优化</a></li>
<li class="book-part">附录</li>
<li><a class="" href="chap-linux-command-bash.html"><span class="header-section-number">A</span> 命令行操作</a></li>
<li><a class="" href="chap-other-softwares.html"><span class="header-section-number">B</span> 其它软件</a></li>
<li><a class="" href="chap-mixed-programming.html"><span class="header-section-number">C</span> 混合编程</a></li>
<li><a class="" href="chap-object-oriented-programming.html"><span class="header-section-number">D</span> 面向对象编程</a></li>
<li><a class="" href="references.html">参考文献</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/XiangyunHuang/masr">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="chap-file-operations" class="section level1" number="3">
<h1>
<span class="header-section-number">第 3 章</span> 文件操作<a class="anchor" aria-label="anchor" href="#chap-file-operations"><i class="fas fa-link"></i></a>
</h1>
<blockquote>
<p>考虑添加 Shell 下的命令实现，参考 <a href="https://github.com/jlevy/the-art-of-command-line/blob/master/README-zh.md">命令行的艺术</a></p>
</blockquote>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span> <span class="co"># 提供管道命令 %&gt;%</span></code></pre></div>
<p><a href="https://github.com/r-lib/fs">fs</a> 由 <a href="https://www.jimhester.com/">Jim Hester</a> 开发，提供文件系统操作的统一接口，相比于 R 默认的文件系统的操作函数有显而易见的优点，详情请看 <a href="https://fs.r-lib.org/" class="uri">https://fs.r-lib.org/</a></p>
<p>对于文件操作，Jim Hester 开发了 <a href="https://github.com/r-lib/fs">fs 包</a> 目的是统一文件操作的命令，由于时间和历史原因，R内置的文件操作函数的命名很不统一，如 <code><a href="https://rdrr.io/r/base/path.expand.html">path.expand()</a></code> 和 <code><a href="https://rdrr.io/r/base/normalizePath.html">normalizePath()</a></code>，<code><a href="https://rdrr.io/r/base/files2.html">Sys.chmod()</a></code> 和 <code><a href="https://rdrr.io/r/base/file.access.html">file.access()</a></code> 等</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 加载 R 包</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://fs.r-lib.org">fs</a></span><span class="op">)</span></code></pre></div>
<div id="list" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> 查看文件<a class="anchor" aria-label="anchor" href="#list"><i class="fas fa-link"></i></a>
</h2>
<p>文件夹只包含文件，目录既包含文件又包含文件夹，<code>list.dirs</code> 列出目录或文件夹，<code>list.files</code> 列出文件或文件夹</p>
<ul>
<li>
<p><code><a href="https://rdrr.io/r/base/list.files.html">list.dirs(path = ".", full.names = TRUE, recursive = TRUE)</a></code></p>
<ul>
<li>path: 指定完整路径名，默认使用当前路径 <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code>
</li>
<li>full.names: TRUE 返回相对路径，FALSE 返回目录的名称</li>
<li>recursive: 是否递归的方式列出目录，如果是的话，目录下的子目录也会列出</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># list.dirs(path = '.', full.names = TRUE, recursive = TRUE)</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.dirs</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">'.'</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "./_book"                             
##  [2] "./_bookdown_files"                   
##  [3] "./.git"                              
##  [4] "./.github"                           
##  [5] "./bayesian-models_files"             
##  [6] "./case-study_cache"                  
##  [7] "./case-study_files"                  
##  [8] "./code"                              
##  [9] "./dashboard"                         
## [10] "./data"                              
## [11] "./data-manipulation_files"           
## [12] "./data-transportation_files"         
## [13] "./data-visualization_cache"          
## [14] "./data-visualization_files"          
## [15] "./data-visualization-gallery_cache"  
## [16] "./data-visualization-gallery_files"  
## [17] "./diagrams"                          
## [18] "./dynamic-documents_files"           
## [19] "./examples"                          
## [20] "./experimental-design_files"         
## [21] "./generalized-linear-models_files"   
## [22] "./graphics-foundations_files"        
## [23] "./hypothesis-test_files"             
## [24] "./images"                            
## [25] "./index_cache"                       
## [26] "./index_files"                       
## [27] "./interactive-network-graphics_files"
## [28] "./interactive-shiny-app_files"       
## [29] "./interactive-web-graphics_files"    
## [30] "./linear-models_cache"               
## [31] "./linear-models_files"               
## [32] "./matrix-operations_files"           
## [33] "./mixed-programming_cache"           
## [34] "./mixed-programming_files"           
## [35] "./neural-networks_cache"             
## [36] "./numerical-optimization_files"      
## [37] "./other-softwares_cache"             
## [38] "./other-softwares_files"             
## [39] "./parameter-estimators_files"        
## [40] "./power-analysis_files"              
## [41] "./preface_cache"                     
## [42] "./preface_files"                     
## [43] "./sampling-distributions_files"      
## [44] "./screenshots"                       
## [45] "./spatial-analysis_cache"            
## [46] "./spatial-analysis_files"            
## [47] "./spatial-modeling_cache"            
## [48] "./survival-analysis_files"           
## [49] "./symbolic-computation_cache"        
## [50] "./symbolic-computation_files"        
## [51] "./time-series-analysis_cache"        
## [52] "./time-series-analysis_files"</code></pre>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.dirs</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">'.'</span>, full.names <span class="op">=</span> <span class="cn">FALSE</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "_book"                              "_bookdown_files"                   
##  [3] ".git"                               ".github"                           
##  [5] "bayesian-models_files"              "case-study_cache"                  
##  [7] "case-study_files"                   "code"                              
##  [9] "dashboard"                          "data"                              
## [11] "data-manipulation_files"            "data-transportation_files"         
## [13] "data-visualization_cache"           "data-visualization_files"          
## [15] "data-visualization-gallery_cache"   "data-visualization-gallery_files"  
## [17] "diagrams"                           "dynamic-documents_files"           
## [19] "examples"                           "experimental-design_files"         
## [21] "generalized-linear-models_files"    "graphics-foundations_files"        
## [23] "hypothesis-test_files"              "images"                            
## [25] "index_cache"                        "index_files"                       
## [27] "interactive-network-graphics_files" "interactive-shiny-app_files"       
## [29] "interactive-web-graphics_files"     "linear-models_cache"               
## [31] "linear-models_files"                "matrix-operations_files"           
## [33] "mixed-programming_cache"            "mixed-programming_files"           
## [35] "neural-networks_cache"              "numerical-optimization_files"      
## [37] "other-softwares_cache"              "other-softwares_files"             
## [39] "parameter-estimators_files"         "power-analysis_files"              
## [41] "preface_cache"                      "preface_files"                     
## [43] "sampling-distributions_files"       "screenshots"                       
## [45] "spatial-analysis_cache"             "spatial-analysis_files"            
## [47] "spatial-modeling_cache"             "survival-analysis_files"           
## [49] "symbolic-computation_cache"         "symbolic-computation_files"        
## [51] "time-series-analysis_cache"         "time-series-analysis_files"</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/list.files.html">list.files(path = ".", pattern = NULL, all.files = FALSE, full.names = FALSE, recursive = FALSE,ignore.case = FALSE, include.dirs = FALSE, no.. = FALSE)</a></code></p>
<p>是否递归的方式列出目录，如果是的话，目录下的子目录也会列出</p>
<ul>
<li>path: 指定完整路径名，默认使用当前路径 <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code>
</li>
<li>full.names: TRUE 返回相对路径，FALSE 返回目录的名称</li>
<li>recursive: 是否递归的方式列出目录，如果是的话，目录下的子目录也会列出</li>
</ul>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/file.show.html">file.show(..., header = rep("", nfiles), title = "R Information", delete.file = FALSE, pager = getOption("pager"),encoding = "")</a></code></p>
<p>打开文件内容，<code>file.show</code> 会在R终端中新开一个窗口显示文件</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rinternals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Rhome.html">R.home</a></span><span class="op">(</span><span class="st">"include"</span><span class="op">)</span>, <span class="st">"Rinternals.h"</span><span class="op">)</span>
<span class="co"># file.show(rinternals)</span></code></pre></div>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/file.info.html">file.info(..., extra_cols = TRUE)</a></code></p>
<p>获取文件信息，此外 <code><a href="https://rdrr.io/r/base/file.info.html">file.mode(...)</a></code> 、 <code><a href="https://rdrr.io/r/base/file.info.html">file.mtime(...)</a></code> 和 <code><a href="https://rdrr.io/r/base/file.info.html">file.size(...)</a></code> 分别表示文件的读写权限，修改时间和文件大小。</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/file.info.html">file.info</a></span><span class="op">(</span><span class="va">rinternals</span><span class="op">)</span></code></pre></div>
<pre><code>##                                          size isdir mode               mtime
## /opt/R/4.1.0/lib/R/include/Rinternals.h 63079 FALSE  644 2021-05-18 09:11:10
##                                                       ctime               atime
## /opt/R/4.1.0/lib/R/include/Rinternals.h 2021-08-10 09:30:36 2021-08-10 09:43:33
##                                         uid gid uname grname
## /opt/R/4.1.0/lib/R/include/Rinternals.h   0   0  root   root</code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/file.info.html">file.mode</a></span><span class="op">(</span><span class="va">rinternals</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "644"</code></pre>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/file.info.html">file.mtime</a></span><span class="op">(</span><span class="va">rinternals</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2021-05-18 09:11:10 UTC"</code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/file.info.html">file.size</a></span><span class="op">(</span><span class="va">rinternals</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 63079</code></pre>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 查看当前目录的权限</span>
<span class="fu"><a href="https://rdrr.io/r/base/file.info.html">file.info</a></span><span class="op">(</span><span class="st">"."</span><span class="op">)</span></code></pre></div>
<pre><code>##    size isdir mode               mtime               ctime               atime
## . 12288  TRUE  755 2021-08-10 09:48:59 2021-08-10 09:48:59 2021-08-10 09:49:00
##    uid gid  uname grname
## . 1001 121 runner docker</code></pre>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 查看指定目录权限</span>
<span class="fu"><a href="https://rdrr.io/r/base/file.info.html">file.info</a></span><span class="op">(</span><span class="st">"./_book/"</span><span class="op">)</span>    </code></pre></div>
<pre><code>##          size isdir mode               mtime               ctime
## ./_book/ 4096  TRUE  755 2021-08-10 09:48:53 2021-08-10 09:48:53
##                        atime  uid gid  uname grname
## ./_book/ 2021-08-10 09:48:53 1001 121 runner docker</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/file.access.html">file.access(names, mode = 0)</a></code></p>
<p>文件是否可以被访问，第二个参数 mode 一共有四种取值 0，1，2，4，分别表示文件的存在性，可执行，可写和可读四种，返回值 0 表示成功，返回值 -1 表示失败。</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/file.access.html">file.access</a></span><span class="op">(</span><span class="va">rinternals</span>,mode <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<pre><code>## /opt/R/4.1.0/lib/R/include/Rinternals.h 
##                                       0</code></pre>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/file.access.html">file.access</a></span><span class="op">(</span><span class="va">rinternals</span>,mode <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code>## /opt/R/4.1.0/lib/R/include/Rinternals.h 
##                                      -1</code></pre>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/file.access.html">file.access</a></span><span class="op">(</span><span class="va">rinternals</span>,mode <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<pre><code>## /opt/R/4.1.0/lib/R/include/Rinternals.h 
##                                      -1</code></pre>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/file.access.html">file.access</a></span><span class="op">(</span><span class="va">rinternals</span>,mode <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></code></pre></div>
<pre><code>## /opt/R/4.1.0/lib/R/include/Rinternals.h 
##                                       0</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/list.files.html">dir(path = ".", pattern = NULL, all.files = FALSE, full.names = FALSE, recursive = FALSE, ignore.case = FALSE, include.dirs = FALSE, no.. = FALSE)</a></code></p>
<p>查看目录，首先看看和目录操作有关的函数列表</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/apropos.html">apropos</a></span><span class="op">(</span><span class="st">"^dir."</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "dir_copy"   "dir_create" "dir_delete" "dir_exists" "dir_info"  
##  [6] "dir_ls"     "dir_map"    "dir_tree"   "dir_walk"   "dir.create"
## [11] "dir.exists" "dirname"</code></pre>
<p>显而易见，<code>dir.create</code> 和 <code>dir.exists</code> 分别是创建目录和查看目录的存在性。<code>dirname</code> 和 <code>basename</code> 是一对函数用来操作文件路径。以当前目录/home/runner/work/masr/masr为例，<code><a href="https://rdrr.io/r/base/basename.html">dirname(getwd())</a></code> 返回 /home/runner/work/masr 而 <code><a href="https://rdrr.io/r/base/basename.html">basename(getwd())</a></code> 返回 masr。对于文件路径而言，<code><a href="https://rdrr.io/r/base/basename.html">dirname(rinternals)</a></code> 返回文件所在的目录/opt/R/4.1.0/lib/R/include， <code><a href="https://rdrr.io/r/base/basename.html">basename(rinternals)</a></code> 返回文件名Rinternals.h。<code>dir</code> 函数查看指定路径或目录下的文件，支持以模式匹配和递归的方式查找目录下的文件</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 当前目录下的子目录和文件</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>##   [1] "_book"                                      
##   [2] "_bookdown_files"                            
##   [3] "_bookdown.yml"                              
##   [4] "_build.sh"                                  
##   [5] "_common.R"                                  
##   [6] "_deploy-book.R"                             
##   [7] "_output.yml"                                
##   [8] "_render.R"                                  
##   [9] "Adobe-Fonts.zip"                            
##  [10] "appendix.Rmd"                               
##  [11] "association-rule-mining.Rmd"                
##  [12] "bayesian-computation.Rmd"                   
##  [13] "bayesian-models_files"                      
##  [14] "bayesian-models.Rmd"                        
##  [15] "big-data.Rmd"                               
##  [16] "book.bib"                                   
##  [17] "case-study_cache"                           
##  [18] "case-study_files"                           
##  [19] "case-study.Rmd"                             
##  [20] "cmdstan-2.27.0.tar.gz"                      
##  [21] "code"                                       
##  [22] "dashboard"                                  
##  [23] "data"                                       
##  [24] "data-explorer.Rmd"                          
##  [25] "data-manipulation_files"                    
##  [26] "data-manipulation.Rmd"                      
##  [27] "data-structure.Rmd"                         
##  [28] "data-transportation_files"                  
##  [29] "data-transportation.Rmd"                    
##  [30] "data-visualization_cache"                   
##  [31] "data-visualization_files"                   
##  [32] "data-visualization-gallery_cache"           
##  [33] "data-visualization-gallery_files"           
##  [34] "data-visualization.Rmd"                     
##  [35] "decision-trees.Rmd"                         
##  [36] "deep-learning.Rmd"                          
##  [37] "DESCRIPTION"                                
##  [38] "diagrams"                                   
##  [39] "docker-compose.yml"                         
##  [40] "Dockerfile"                                 
##  [41] "dynamic-documents_files"                    
##  [42] "dynamic-documents.Rmd"                      
##  [43] "examples"                                   
##  [44] "expectation-maximization.Rmd"               
##  [45] "experimental-design_files"                  
##  [46] "experimental-design.Rmd"                    
##  [47] "file-operations.Rmd"                        
##  [48] "ga_script.html"                             
##  [49] "generalized-additive-mixed-models.Rmd"      
##  [50] "generalized-additive-models.Rmd"            
##  [51] "generalized-linear-mixed-effects-models.Rmd"
##  [52] "generalized-linear-models_files"            
##  [53] "generalized-linear-models.Rmd"              
##  [54] "gradient-boosting-machine.Rmd"              
##  [55] "graphics-foundations_files"                 
##  [56] "graphics-foundations.Rmd"                   
##  [57] "hypothesis-test_files"                      
##  [58] "hypothesis-test.Rmd"                        
##  [59] "ieee.csl"                                   
##  [60] "images"                                     
##  [61] "index_cache"                                
##  [62] "index_files"                                
##  [63] "index.md"                                   
##  [64] "index.Rmd"                                  
##  [65] "interactive-data-tables.Rmd"                
##  [66] "interactive-network-graphics_files"         
##  [67] "interactive-shiny-app_files"                
##  [68] "interactive-shiny-app.Rmd"                  
##  [69] "interactive-web-graphics_files"             
##  [70] "interactive-web-graphics.Rmd"               
##  [71] "k-means-clustering.Rmd"                     
##  [72] "k-nearest-neighbors.Rmd"                    
##  [73] "LICENSE"                                    
##  [74] "linear-discriminant-analysis.Rmd"           
##  [75] "linear-mixed-effects-models.Rmd"            
##  [76] "linear-models_cache"                        
##  [77] "linear-models_files"                        
##  [78] "linear-models.Rmd"                          
##  [79] "machine-learning.Rmd"                       
##  [80] "Makefile"                                   
##  [81] "markov-chain-monte-carlo.Rmd"               
##  [82] "masr.rds"                                   
##  [83] "masr.Rproj"                                 
##  [84] "matrix-operations_files"                    
##  [85] "matrix-operations.Rmd"                      
##  [86] "mixed-programming_cache"                    
##  [87] "mixed-programming_files"                    
##  [88] "mixed-programming.Rmd"                      
##  [89] "model-assessment.Rmd"                       
##  [90] "model-deployment.Rmd"                       
##  [91] "naive-bayes.Rmd"                            
##  [92] "natural-language-processing.Rmd"            
##  [93] "network-analysis.Rmd"                       
##  [94] "neural-networks_cache"                      
##  [95] "neural-networks.Rmd"                        
##  [96] "nonlinear-mixed-models.Rmd"                 
##  [97] "nonlinear-models.Rmd"                       
##  [98] "notations.md"                               
##  [99] "notations.Rmd"                              
## [100] "numerical-optimization_files"               
## [101] "numerical-optimization.Rmd"                 
## [102] "object-oriented-programming.Rmd"            
## [103] "other-softwares_cache"                      
## [104] "other-softwares_files"                      
## [105] "other-softwares.Rmd"                        
## [106] "outlier-detection.Rmd"                      
## [107] "packages.bib"                               
## [108] "parameter-estimators_files"                 
## [109] "parameter-estimators.Rmd"                   
## [110] "power-analysis_files"                       
## [111] "power-analysis.Rmd"                         
## [112] "preamble.tex"                               
## [113] "preface_cache"                              
## [114] "preface_files"                              
## [115] "preface.md"                                 
## [116] "preface.Rmd"                                
## [117] "push.sh"                                    
## [118] "random-forests.Rmd"                         
## [119] "random-vector.Rmd"                          
## [120] "README.md"                                  
## [121] "recommender-systems.Rmd"                    
## [122] "references.Rmd"                             
## [123] "regular-expressions.Rmd"                    
## [124] "render5719181905ae.rds"                     
## [125] "renv.lock"                                  
## [126] "requirements.txt"                           
## [127] "sampling-distributions_files"               
## [128] "sampling-distributions.Rmd"                 
## [129] "screenshots"                                
## [130] "sidebar.lua"                                
## [131] "spark-3.1.1-bin-hadoop3.2.tgz"              
## [132] "spatial-analysis_cache"                     
## [133] "spatial-analysis_files"                     
## [134] "spatial-analysis.Rmd"                       
## [135] "spatial-modeling_cache"                     
## [136] "spatial-modeling.Rmd"                       
## [137] "stochastic-process.Rmd"                     
## [138] "string-operations.Rmd"                      
## [139] "style.css"                                  
## [140] "support-vector-machines.Rmd"                
## [141] "survival-analysis_files"                    
## [142] "survival-analysis.Rmd"                      
## [143] "symbolic-computation_cache"                 
## [144] "symbolic-computation_files"                 
## [145] "symbolic-computation.Rmd"                   
## [146] "texlive.txt"                                
## [147] "text-analysis.Rmd"                          
## [148] "time-series-analysis_cache"                 
## [149] "time-series-analysis_files"                 
## [150] "time-series-analysis.Rmd"</code></pre>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 查看指定目录的子目录和文件</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"./"</span><span class="op">)</span></code></pre></div>
<pre><code>##   [1] "_book"                                      
##   [2] "_bookdown_files"                            
##   [3] "_bookdown.yml"                              
##   [4] "_build.sh"                                  
##   [5] "_common.R"                                  
##   [6] "_deploy-book.R"                             
##   [7] "_output.yml"                                
##   [8] "_render.R"                                  
##   [9] "Adobe-Fonts.zip"                            
##  [10] "appendix.Rmd"                               
##  [11] "association-rule-mining.Rmd"                
##  [12] "bayesian-computation.Rmd"                   
##  [13] "bayesian-models_files"                      
##  [14] "bayesian-models.Rmd"                        
##  [15] "big-data.Rmd"                               
##  [16] "book.bib"                                   
##  [17] "case-study_cache"                           
##  [18] "case-study_files"                           
##  [19] "case-study.Rmd"                             
##  [20] "cmdstan-2.27.0.tar.gz"                      
##  [21] "code"                                       
##  [22] "dashboard"                                  
##  [23] "data"                                       
##  [24] "data-explorer.Rmd"                          
##  [25] "data-manipulation_files"                    
##  [26] "data-manipulation.Rmd"                      
##  [27] "data-structure.Rmd"                         
##  [28] "data-transportation_files"                  
##  [29] "data-transportation.Rmd"                    
##  [30] "data-visualization_cache"                   
##  [31] "data-visualization_files"                   
##  [32] "data-visualization-gallery_cache"           
##  [33] "data-visualization-gallery_files"           
##  [34] "data-visualization.Rmd"                     
##  [35] "decision-trees.Rmd"                         
##  [36] "deep-learning.Rmd"                          
##  [37] "DESCRIPTION"                                
##  [38] "diagrams"                                   
##  [39] "docker-compose.yml"                         
##  [40] "Dockerfile"                                 
##  [41] "dynamic-documents_files"                    
##  [42] "dynamic-documents.Rmd"                      
##  [43] "examples"                                   
##  [44] "expectation-maximization.Rmd"               
##  [45] "experimental-design_files"                  
##  [46] "experimental-design.Rmd"                    
##  [47] "file-operations.Rmd"                        
##  [48] "ga_script.html"                             
##  [49] "generalized-additive-mixed-models.Rmd"      
##  [50] "generalized-additive-models.Rmd"            
##  [51] "generalized-linear-mixed-effects-models.Rmd"
##  [52] "generalized-linear-models_files"            
##  [53] "generalized-linear-models.Rmd"              
##  [54] "gradient-boosting-machine.Rmd"              
##  [55] "graphics-foundations_files"                 
##  [56] "graphics-foundations.Rmd"                   
##  [57] "hypothesis-test_files"                      
##  [58] "hypothesis-test.Rmd"                        
##  [59] "ieee.csl"                                   
##  [60] "images"                                     
##  [61] "index_cache"                                
##  [62] "index_files"                                
##  [63] "index.md"                                   
##  [64] "index.Rmd"                                  
##  [65] "interactive-data-tables.Rmd"                
##  [66] "interactive-network-graphics_files"         
##  [67] "interactive-shiny-app_files"                
##  [68] "interactive-shiny-app.Rmd"                  
##  [69] "interactive-web-graphics_files"             
##  [70] "interactive-web-graphics.Rmd"               
##  [71] "k-means-clustering.Rmd"                     
##  [72] "k-nearest-neighbors.Rmd"                    
##  [73] "LICENSE"                                    
##  [74] "linear-discriminant-analysis.Rmd"           
##  [75] "linear-mixed-effects-models.Rmd"            
##  [76] "linear-models_cache"                        
##  [77] "linear-models_files"                        
##  [78] "linear-models.Rmd"                          
##  [79] "machine-learning.Rmd"                       
##  [80] "Makefile"                                   
##  [81] "markov-chain-monte-carlo.Rmd"               
##  [82] "masr.rds"                                   
##  [83] "masr.Rproj"                                 
##  [84] "matrix-operations_files"                    
##  [85] "matrix-operations.Rmd"                      
##  [86] "mixed-programming_cache"                    
##  [87] "mixed-programming_files"                    
##  [88] "mixed-programming.Rmd"                      
##  [89] "model-assessment.Rmd"                       
##  [90] "model-deployment.Rmd"                       
##  [91] "naive-bayes.Rmd"                            
##  [92] "natural-language-processing.Rmd"            
##  [93] "network-analysis.Rmd"                       
##  [94] "neural-networks_cache"                      
##  [95] "neural-networks.Rmd"                        
##  [96] "nonlinear-mixed-models.Rmd"                 
##  [97] "nonlinear-models.Rmd"                       
##  [98] "notations.md"                               
##  [99] "notations.Rmd"                              
## [100] "numerical-optimization_files"               
## [101] "numerical-optimization.Rmd"                 
## [102] "object-oriented-programming.Rmd"            
## [103] "other-softwares_cache"                      
## [104] "other-softwares_files"                      
## [105] "other-softwares.Rmd"                        
## [106] "outlier-detection.Rmd"                      
## [107] "packages.bib"                               
## [108] "parameter-estimators_files"                 
## [109] "parameter-estimators.Rmd"                   
## [110] "power-analysis_files"                       
## [111] "power-analysis.Rmd"                         
## [112] "preamble.tex"                               
## [113] "preface_cache"                              
## [114] "preface_files"                              
## [115] "preface.md"                                 
## [116] "preface.Rmd"                                
## [117] "push.sh"                                    
## [118] "random-forests.Rmd"                         
## [119] "random-vector.Rmd"                          
## [120] "README.md"                                  
## [121] "recommender-systems.Rmd"                    
## [122] "references.Rmd"                             
## [123] "regular-expressions.Rmd"                    
## [124] "render5719181905ae.rds"                     
## [125] "renv.lock"                                  
## [126] "requirements.txt"                           
## [127] "sampling-distributions_files"               
## [128] "sampling-distributions.Rmd"                 
## [129] "screenshots"                                
## [130] "sidebar.lua"                                
## [131] "spark-3.1.1-bin-hadoop3.2.tgz"              
## [132] "spatial-analysis_cache"                     
## [133] "spatial-analysis_files"                     
## [134] "spatial-analysis.Rmd"                       
## [135] "spatial-modeling_cache"                     
## [136] "spatial-modeling.Rmd"                       
## [137] "stochastic-process.Rmd"                     
## [138] "string-operations.Rmd"                      
## [139] "style.css"                                  
## [140] "support-vector-machines.Rmd"                
## [141] "survival-analysis_files"                    
## [142] "survival-analysis.Rmd"                      
## [143] "symbolic-computation_cache"                 
## [144] "symbolic-computation_files"                 
## [145] "symbolic-computation.Rmd"                   
## [146] "texlive.txt"                                
## [147] "text-analysis.Rmd"                          
## [148] "time-series-analysis_cache"                 
## [149] "time-series-analysis_files"                 
## [150] "time-series-analysis.Rmd"</code></pre>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 只列出以字母R开头的子目录和文件</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"./"</span>, pattern <span class="op">=</span> <span class="st">"^R"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "README.md"</code></pre>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 列出目录下所有目录和文件，包括隐藏文件</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">"./"</span>, all.files <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>##   [1] "_book"                                      
##   [2] "_bookdown_files"                            
##   [3] "_bookdown.yml"                              
##   [4] "_build.sh"                                  
##   [5] "_common.R"                                  
##   [6] "_deploy-book.R"                             
##   [7] "_output.yml"                                
##   [8] "_render.R"                                  
##   [9] "."                                          
##  [10] ".."                                         
##  [11] ".git"                                       
##  [12] ".github"                                    
##  [13] ".gitignore"                                 
##  [14] ".Rprofile"                                  
##  [15] "Adobe-Fonts.zip"                            
##  [16] "appendix.Rmd"                               
##  [17] "association-rule-mining.Rmd"                
##  [18] "bayesian-computation.Rmd"                   
##  [19] "bayesian-models_files"                      
##  [20] "bayesian-models.Rmd"                        
##  [21] "big-data.Rmd"                               
##  [22] "book.bib"                                   
##  [23] "case-study_cache"                           
##  [24] "case-study_files"                           
##  [25] "case-study.Rmd"                             
##  [26] "cmdstan-2.27.0.tar.gz"                      
##  [27] "code"                                       
##  [28] "dashboard"                                  
##  [29] "data"                                       
##  [30] "data-explorer.Rmd"                          
##  [31] "data-manipulation_files"                    
##  [32] "data-manipulation.Rmd"                      
##  [33] "data-structure.Rmd"                         
##  [34] "data-transportation_files"                  
##  [35] "data-transportation.Rmd"                    
##  [36] "data-visualization_cache"                   
##  [37] "data-visualization_files"                   
##  [38] "data-visualization-gallery_cache"           
##  [39] "data-visualization-gallery_files"           
##  [40] "data-visualization.Rmd"                     
##  [41] "decision-trees.Rmd"                         
##  [42] "deep-learning.Rmd"                          
##  [43] "DESCRIPTION"                                
##  [44] "diagrams"                                   
##  [45] "docker-compose.yml"                         
##  [46] "Dockerfile"                                 
##  [47] "dynamic-documents_files"                    
##  [48] "dynamic-documents.Rmd"                      
##  [49] "examples"                                   
##  [50] "expectation-maximization.Rmd"               
##  [51] "experimental-design_files"                  
##  [52] "experimental-design.Rmd"                    
##  [53] "file-operations.Rmd"                        
##  [54] "ga_script.html"                             
##  [55] "generalized-additive-mixed-models.Rmd"      
##  [56] "generalized-additive-models.Rmd"            
##  [57] "generalized-linear-mixed-effects-models.Rmd"
##  [58] "generalized-linear-models_files"            
##  [59] "generalized-linear-models.Rmd"              
##  [60] "gradient-boosting-machine.Rmd"              
##  [61] "graphics-foundations_files"                 
##  [62] "graphics-foundations.Rmd"                   
##  [63] "hypothesis-test_files"                      
##  [64] "hypothesis-test.Rmd"                        
##  [65] "ieee.csl"                                   
##  [66] "images"                                     
##  [67] "index_cache"                                
##  [68] "index_files"                                
##  [69] "index.md"                                   
##  [70] "index.Rmd"                                  
##  [71] "interactive-data-tables.Rmd"                
##  [72] "interactive-network-graphics_files"         
##  [73] "interactive-shiny-app_files"                
##  [74] "interactive-shiny-app.Rmd"                  
##  [75] "interactive-web-graphics_files"             
##  [76] "interactive-web-graphics.Rmd"               
##  [77] "k-means-clustering.Rmd"                     
##  [78] "k-nearest-neighbors.Rmd"                    
##  [79] "LICENSE"                                    
##  [80] "linear-discriminant-analysis.Rmd"           
##  [81] "linear-mixed-effects-models.Rmd"            
##  [82] "linear-models_cache"                        
##  [83] "linear-models_files"                        
##  [84] "linear-models.Rmd"                          
##  [85] "machine-learning.Rmd"                       
##  [86] "Makefile"                                   
##  [87] "markov-chain-monte-carlo.Rmd"               
##  [88] "masr.rds"                                   
##  [89] "masr.Rproj"                                 
##  [90] "matrix-operations_files"                    
##  [91] "matrix-operations.Rmd"                      
##  [92] "mixed-programming_cache"                    
##  [93] "mixed-programming_files"                    
##  [94] "mixed-programming.Rmd"                      
##  [95] "model-assessment.Rmd"                       
##  [96] "model-deployment.Rmd"                       
##  [97] "naive-bayes.Rmd"                            
##  [98] "natural-language-processing.Rmd"            
##  [99] "network-analysis.Rmd"                       
## [100] "neural-networks_cache"                      
## [101] "neural-networks.Rmd"                        
## [102] "nonlinear-mixed-models.Rmd"                 
## [103] "nonlinear-models.Rmd"                       
## [104] "notations.md"                               
## [105] "notations.Rmd"                              
## [106] "numerical-optimization_files"               
## [107] "numerical-optimization.Rmd"                 
## [108] "object-oriented-programming.Rmd"            
## [109] "other-softwares_cache"                      
## [110] "other-softwares_files"                      
## [111] "other-softwares.Rmd"                        
## [112] "outlier-detection.Rmd"                      
## [113] "packages.bib"                               
## [114] "parameter-estimators_files"                 
## [115] "parameter-estimators.Rmd"                   
## [116] "power-analysis_files"                       
## [117] "power-analysis.Rmd"                         
## [118] "preamble.tex"                               
## [119] "preface_cache"                              
## [120] "preface_files"                              
## [121] "preface.md"                                 
## [122] "preface.Rmd"                                
## [123] "push.sh"                                    
## [124] "random-forests.Rmd"                         
## [125] "random-vector.Rmd"                          
## [126] "README.md"                                  
## [127] "recommender-systems.Rmd"                    
## [128] "references.Rmd"                             
## [129] "regular-expressions.Rmd"                    
## [130] "render5719181905ae.rds"                     
## [131] "renv.lock"                                  
## [132] "requirements.txt"                           
## [133] "sampling-distributions_files"               
## [134] "sampling-distributions.Rmd"                 
## [135] "screenshots"                                
## [136] "sidebar.lua"                                
## [137] "spark-3.1.1-bin-hadoop3.2.tgz"              
## [138] "spatial-analysis_cache"                     
## [139] "spatial-analysis_files"                     
## [140] "spatial-analysis.Rmd"                       
## [141] "spatial-modeling_cache"                     
## [142] "spatial-modeling.Rmd"                       
## [143] "stochastic-process.Rmd"                     
## [144] "string-operations.Rmd"                      
## [145] "style.css"                                  
## [146] "support-vector-machines.Rmd"                
## [147] "survival-analysis_files"                    
## [148] "survival-analysis.Rmd"                      
## [149] "symbolic-computation_cache"                 
## [150] "symbolic-computation_files"                 
## [151] "symbolic-computation.Rmd"                   
## [152] "texlive.txt"                                
## [153] "text-analysis.Rmd"                          
## [154] "time-series-analysis_cache"                 
## [155] "time-series-analysis_files"                 
## [156] "time-series-analysis.Rmd"</code></pre>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 支持正则表达式</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">'^[A-Z]+[.]txt$'</span>, full.names<span class="op">=</span><span class="cn">TRUE</span>, <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'doc'</span>, <span class="st">'SuiteSparse'</span>, package<span class="op">=</span><span class="st">'Matrix'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/home/runner/work/_temp/Library/Matrix/doc/SuiteSparse/AMD.txt"    
## [2] "/home/runner/work/_temp/Library/Matrix/doc/SuiteSparse/CHOLMOD.txt"
## [3] "/home/runner/work/_temp/Library/Matrix/doc/SuiteSparse/COLAMD.txt" 
## [4] "/home/runner/work/_temp/Library/Matrix/doc/SuiteSparse/SPQR.txt"</code></pre>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 在临时目录下递归创建一个目录</span>
<span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/_book/tmp"</span><span class="op">)</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</li>
</ul>
<p>查看当前目录下的文件和文件夹 <code>tree -L 2 .</code> 或者 <code>ls -l .</code></p>
</div>
<div id="manipulation" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> 操作文件<a class="anchor" aria-label="anchor" href="#manipulation"><i class="fas fa-link"></i></a>
</h2>
<p>实现文件增删改查的函数如下</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/apropos.html">apropos</a></span><span class="op">(</span><span class="st">"^file."</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "file_access"    "file_chmod"     "file_chown"     "file_copy"     
##  [5] "file_create"    "file_delete"    "file_exists"    "file_info"     
##  [9] "file_move"      "file_show"      "file_size"      "file_temp"     
## [13] "file_temp_pop"  "file_temp_push" "file_test"      "file_touch"    
## [17] "file.access"    "file.append"    "file.choose"    "file.copy"     
## [21] "file.create"    "file.edit"      "file.exists"    "file.info"     
## [25] "file.link"      "file.mode"      "file.mtime"     "file.path"     
## [29] "file.remove"    "file.rename"    "file.show"      "file.size"     
## [33] "file.symlink"   "fileSnapshot"</code></pre>
<ol style="list-style-type: decimal">
<li>
<p><code><a href="https://rdrr.io/r/base/files.html">file.create(..., showWarnings = TRUE)</a></code></p>
<p>创建/删除文件，检查文件的存在性</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.create</a></span><span class="op">(</span><span class="st">'demo.txt'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span><span class="op">(</span><span class="st">'demo.txt'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.remove</a></span><span class="op">(</span><span class="st">'demo.txt'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span><span class="op">(</span><span class="st">'demo.txt'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/files.html">file.rename(from, to)</a></code> 文件重命名</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.create</a></span><span class="op">(</span><span class="st">'demo.txt'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.rename</a></span><span class="op">(</span>from <span class="op">=</span> <span class="st">'demo.txt'</span>, to <span class="op">=</span> <span class="st">'tmp.txt'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span><span class="op">(</span><span class="st">'tmp.txt'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/files.html">file.append(file1, file2)</a></code> 追加文件 <code>file2</code> 的内容到文件 <code>file1</code> 上</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span><span class="op">(</span>paths <span class="op">=</span> <span class="st">'data/'</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">'data/'</span><span class="op">)</span>
<span class="co"># 创建两个临时文件</span>
<span class="co"># file.create(c('data/tmp1.md','data/tmp2.md'))</span>
<span class="co"># 写入内容</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"AAA\n"</span>, file <span class="op">=</span> <span class="st">'data/tmp1.md'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"BBB\n"</span>, file <span class="op">=</span> <span class="st">'data/tmp2.md'</span><span class="op">)</span>
<span class="co"># 追加文件</span>
<span class="fu"><a href="https://rdrr.io/r/base/files.html">file.append</a></span><span class="op">(</span>file1 <span class="op">=</span> <span class="st">'data/tmp1.md'</span>, file2 <span class="op">=</span> <span class="st">'data/tmp2.md'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 展示文件内容</span>
<span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span><span class="st">'data/tmp1.md'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "AAA" "BBB"</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/files.html">file.copy(from, to, overwrite = recursive, recursive = FALSE,copy.mode = TRUE, copy.date = FALSE)</a></code> 复制文件，参考 <a href="https://blog.csdn.net/wzj_110/article/details/86497860" class="uri">https://blog.csdn.net/wzj_110/article/details/86497860</a></p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.copy</a></span><span class="op">(</span>from <span class="op">=</span> <span class="st">'Makefile'</span>, to <span class="op">=</span> <span class="st">'data/Makefile'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</li>
<li><p><code><a href="https://rdrr.io/r/base/files.html">file.symlink(from, to)</a></code> 创建符号链接 <code><a href="https://rdrr.io/r/base/files.html">file.link(from, to)</a></code> 创建硬链接</p></li>
<li><p><code>Sys.junction(from, to)</code> windows 平台上的函数，提供类似符号链接的功能</p></li>
<li><p><code><a href="https://rdrr.io/r/base/Sys.readlink.html">Sys.readlink(paths)</a></code> 读取文件的符号链接（软链接）</p></li>
<li>
<p><code>choose.files</code> 在 Windows 环境下交互式地选择一个或多个文件，所以该函数只运行于 Windows 环境</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 选择 zip 格式的压缩文件或其它</span>
<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
     <span class="fu"><a href="https://rdrr.io/r/utils/choose.files.html">choose.files</a></span><span class="op">(</span>filters <span class="op">=</span> <span class="va">Filters</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"zip"</span>, <span class="st">"All"</span><span class="op">)</span>,<span class="op">]</span><span class="op">)</span></code></pre></div>
<p><code>Filters</code> 参数传递一个矩阵，用来描述或标记R识别的文件类型，上面这个例子就能筛选出 zip 格式的文件</p>
</li>
<li>
<p><code>download.file</code> 文件下载</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span><span class="op">(</span>url <span class="op">=</span> <span class="st">'https://mirrors.tuna.tsinghua.edu.cn/CRAN/src/base/R-latest.tar.gz'</span>,
              destfile <span class="op">=</span> <span class="st">'data/R-latest.tar.gz'</span>, method <span class="op">=</span> <span class="st">'auto'</span><span class="op">)</span></code></pre></div>
</li>
</ol>
</div>
<div id="compression" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> 压缩文件<a class="anchor" aria-label="anchor" href="#compression"><i class="fas fa-link"></i></a>
</h2>
<p>tar 和 zip 是两种常见的压缩文件工具，具有免费和跨平台的特点，因此应用范围广<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://github.com/libarchive/libarchive/wiki/FormatTar" class="uri"&gt;https://github.com/libarchive/libarchive/wiki/FormatTar&lt;/a&gt;&lt;/p&gt;'><sup>8</sup></a>。 R 内对应的压缩与解压缩命令是 <code>tar/untar</code></p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/tar.html">tar</a></span><span class="op">(</span><span class="va">tarfile</span>, files <span class="op">=</span> <span class="cn">NULL</span>,
    compression <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"none"</span>, <span class="st">"gzip"</span>, <span class="st">"bzip2"</span>, <span class="st">"xz"</span><span class="op">)</span>,
    compression_level <span class="op">=</span> <span class="fl">6</span>, tar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span><span class="st">"tar"</span><span class="op">)</span>,
    extra_flags <span class="op">=</span> <span class="st">""</span><span class="op">)</span></code></pre></div>
<p>比较常用的压缩文件格式是 <code>.tar.gz</code> 和 <code>.tar.bz2</code>，将目录 <code>_book/</code>及其文件分别压缩成 <code>_book.tar.gz</code> 和 <code>_book.tar.bz2</code> 压缩包的名字可以任意取，后者压缩比率高。<code>.tar.xz</code> 的压缩比率最高，需要确保系统中安装了 gzip，bzip2 和 xz-utils 软件，R 软件自带的 tar 软件来自 <a href="https://github.com/rwinlib/rtools35">Rtools</a><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;继 Rtools35 之后， &lt;a href="https://cloud.r-project.org/bin/windows/testing/rtools40.html"&gt;RTools40&lt;/a&gt; 主要为 R 3.6.0 准备的，包含有 GCC 8 及其它编译R包需要的&lt;a href="https://github.com/r-windows/rtools-packages"&gt;工具包&lt;/a&gt;，详情请看的&lt;a href="https://jeroen.github.io/uros2018"&gt;幻灯片&lt;/a&gt;&lt;/p&gt;'><sup>9</sup></a>，我们可以通过设置系统环境变量 <code><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv(tar="path/to/tar")</a></code> 指定外部 tar。<code>tar</code> 实际支持的压缩类型只有 <code>.tar.gz</code><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;a href="https://github.com/rwinlib/utils" class="uri"&gt;https://github.com/rwinlib/utils&lt;/a&gt;&lt;/p&gt;'><sup>10</sup></a>。<code>zip/unzip</code> 压缩与解压缩就不赘述了。</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 打包目录 _book</span>
<span class="fu"><a href="https://rdrr.io/r/utils/tar.html">tar</a></span><span class="op">(</span>tarfile <span class="op">=</span> <span class="st">'data/_book.tar'</span>, files <span class="op">=</span> <span class="st">'_book'</span>, compression <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span>
<span class="co"># 文件压缩成 _book.xz 格式</span>
<span class="fu"><a href="https://rdrr.io/r/utils/tar.html">tar</a></span><span class="op">(</span>tarfile <span class="op">=</span> <span class="st">'data/_book.tar.xz'</span>, files <span class="op">=</span> <span class="st">'data/_book'</span>, compression <span class="op">=</span> <span class="st">'xz'</span><span class="op">)</span>
<span class="co"># tar -cf data/_book.tar _book 然后 xz -z data/_book.tar.xz data/_book.tar</span>
<span class="co"># 或者一次压缩到位 tar -Jcf data/_book.tar.xz _book/</span>

<span class="co"># 解压 xz -d data/_book.tar.xz 再次解压 tar -xf data/_book.tar</span>
<span class="co"># 或者一次解压 tar -Jxf data/_book.tar.xz</span>

<span class="co"># 文件压缩成 _book.tar.gz 格式</span>
<span class="co"># tar -czf data/_book.tar.gz _book</span>
<span class="fu"><a href="https://rdrr.io/r/utils/tar.html">tar</a></span><span class="op">(</span>tarfile <span class="op">=</span> <span class="st">'data/_book.tar.gz'</span>, files <span class="op">=</span> <span class="st">'_book'</span>, compression <span class="op">=</span> <span class="st">'gzip'</span><span class="op">)</span>
<span class="co"># 解压 tar -xzf data/_book.tar.gz</span>

<span class="co"># 文件压缩成 .tar.bz2 格式</span>
<span class="co"># tar -cjf data/book2.tar.bz2 _book</span>
<span class="fu"><a href="https://rdrr.io/r/utils/tar.html">tar</a></span><span class="op">(</span>tarfile <span class="op">=</span> <span class="st">'data/_book.tar.bz2'</span>, files <span class="op">=</span> <span class="st">'_book'</span>, compression <span class="op">=</span> <span class="st">'bzip2'</span><span class="op">)</span>
<span class="co"># 解压 tar -xjf data/book2.tar.bz2</span></code></pre></div>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/untar.html">untar</a></span><span class="op">(</span><span class="va">tarfile</span>, files <span class="op">=</span> <span class="cn">NULL</span>, list <span class="op">=</span> <span class="cn">FALSE</span>, exdir <span class="op">=</span> <span class="st">"."</span>,
      compressed <span class="op">=</span> <span class="cn">NA</span>, extras <span class="op">=</span> <span class="cn">NULL</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>,
      restore_times <span class="op">=</span>  <span class="cn">TRUE</span>, tar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span><span class="st">"TAR"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="paths" class="section level2" number="3.4">
<h2>
<span class="header-section-number">3.4</span> 路径操作<a class="anchor" aria-label="anchor" href="#paths"><i class="fas fa-link"></i></a>
</h2>
<p>环境变量算是路径操作</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 获取环境变量</span>
<span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span><span class="st">"PATH"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/home/runner/.TinyTeX/bin/x86_64-linux:/home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin:/home/runner/.local/bin:/opt/pipx_bin:/usr/share/rust/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin"</code></pre>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 设置环境变量 Windows</span>
<span class="co"># Sys.setenv(R_GSCMD = "C:/Program Files/gs/gs9.26/bin/gswin64c.exe")</span>
<span class="co"># 设置 pandoc 环境变量</span>
<span class="va">pandoc_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span><span class="st">"RSTUDIO_PANDOC"</span>, <span class="cn">NA</span><span class="op">)</span>
<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.which.html">Sys.which</a></span><span class="op">(</span><span class="st">"pandoc"</span><span class="op">)</span> <span class="op">==</span> <span class="st">""</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">pandoc_path</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv</a></span><span class="op">(</span>PATH <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span>
    <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span><span class="st">"PATH"</span><span class="op">)</span>, <span class="va">pandoc_path</span>,
    sep <span class="op">=</span> <span class="kw">if</span> <span class="op">(</span><span class="va">.Platform</span><span class="op">$</span><span class="va">OS.type</span> <span class="op">==</span> <span class="st">"unix"</span><span class="op">)</span> <span class="st">":"</span> <span class="kw">else</span> <span class="st">";"</span>
  <span class="op">)</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>操作文件路径</p>
<ol style="list-style-type: decimal">
<li>
<p><code>file.path</code> Construct Path to File</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="st">'./_book'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "./_book"</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/path.expand.html">path.expand(path)</a></code> Expand File Paths</p>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/path.expand.html">path.expand</a></span><span class="op">(</span><span class="st">'./_book'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "./_book"</code></pre>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/path.expand.html">path.expand</a></span><span class="op">(</span><span class="st">'~'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/home/runner"</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/normalizePath.html">normalizePath()</a></code> Express File Paths in Canonical Form</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html">normalizePath</a></span><span class="op">(</span><span class="st">'~'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/home/runner"</code></pre>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html">normalizePath</a></span><span class="op">(</span><span class="st">'./_book'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/home/runner/work/masr/masr/_book"</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/utils/shortPathName.html">shortPathName(path)</a></code> 只在 Windows 下可用，Express File Paths in Short Form</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/shortPathName.html">shortPathName</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Rhome.html">R.home</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p><code>Sys.glob</code> Wildcard Expansion on File Paths</p>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.glob.html">Sys.glob</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Rhome.html">R.home</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"library"</span>, <span class="st">"compiler"</span>, <span class="st">"R"</span>, <span class="st">"*.rdx"</span><span class="op">)</span><span class="op">)</span> </code></pre></div>
<pre><code>## [1] "/opt/R/4.1.0/lib/R/library/compiler/R/compiler.rdx"</code></pre>
</li>
</ol>
</div>
<div id="find" class="section level2" number="3.5">
<h2>
<span class="header-section-number">3.5</span> 查找文件<a class="anchor" aria-label="anchor" href="#find"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://github.com/r-lib/here">here</a> 包用来查找你的文件，查找文件、可执行文件的完整路径、R 包</p>
<ol style="list-style-type: decimal">
<li>
<p><code>Sys.which</code> Find Full Paths to Executables</p>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.which.html">Sys.which</a></span><span class="op">(</span><span class="st">'pandoc'</span><span class="op">)</span></code></pre></div>
<pre><code>##            pandoc 
## "/usr/bin/pandoc"</code></pre>
</li>
<li>
<p><code>system.file</code> Find Names of R System Files</p>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">'CITATION'</span>,package <span class="op">=</span> <span class="st">'base'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/opt/R/4.1.0/lib/R/library/base/CITATION"</code></pre>
</li>
<li>
<p><code>R.home</code></p>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># R 安装目录</span>
<span class="fu"><a href="https://rdrr.io/r/base/Rhome.html">R.home</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/opt/R/4.1.0/lib/R"</code></pre>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># R执行文件目录</span>
<span class="fu"><a href="https://rdrr.io/r/base/Rhome.html">R.home</a></span><span class="op">(</span><span class="st">'bin'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/opt/R/4.1.0/lib/R/bin"</code></pre>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 配置文件目录</span>
<span class="fu"><a href="https://rdrr.io/r/base/Rhome.html">R.home</a></span><span class="op">(</span><span class="st">'etc'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/opt/R/4.1.0/lib/R/etc"</code></pre>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># R 基础扩展包存放目录</span>
<span class="fu"><a href="https://rdrr.io/r/base/Rhome.html">R.home</a></span><span class="op">(</span><span class="st">'library'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/opt/R/4.1.0/lib/R/library"</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/libPaths.html">.libPaths()</a></code> R 包存放的路径有哪些</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/libPaths.html">.libPaths</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/home/runner/work/_temp/Library" "/opt/R/4.1.0/lib/R/library"</code></pre>
</li>
<li>
<p><code>find.package</code> 查找R包所在目录</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/find.package.html">find.package</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">'MASS'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/opt/R/4.1.0/lib/R/library/MASS"</code></pre>
</li>
<li>
<p><code>file.exist</code> 检查文件是否存在</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Rhome.html">R.home</a></span><span class="op">(</span><span class="st">'etc'</span><span class="op">)</span>,<span class="st">"Rprofile.site"</span>,sep <span class="op">=</span> <span class="va">.Platform</span><span class="op">$</span><span class="va">file.sep</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</li>
<li><p><code>apropos</code> 和 <code>find</code> 查找对象</p></li>
</ol>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/apropos.html">apropos</a></span><span class="op">(</span><span class="va">what</span>, where <span class="op">=</span> <span class="cn">FALSE</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span>, mode <span class="op">=</span> <span class="st">"any"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/apropos.html">find</a></span><span class="op">(</span><span class="va">what</span>, mode <span class="op">=</span> <span class="st">"any"</span>, numeric <span class="op">=</span> <span class="cn">FALSE</span>, simple.words <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>匹配含有 find 的函数</p>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/apropos.html">apropos</a></span><span class="op">(</span><span class="st">"find"</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "find"                 "Find"                 "find.package"        
##  [4] "findClass"            "findFunction"         "findInterval"        
##  [7] "findLineNum"          "findMethod"           "findMethods"         
## [10] "findMethodSignatures" "findPackageEnv"       "findRestart"         
## [13] "findUnique"</code></pre>
<p>问号 <code><a href="https://rdrr.io/r/utils/Question.html">?</a></code> 加函数名搜索R软件内置函数的帮助文档，如 <code>?regrex</code>。如果不知道具体的函数名，可采用关键词搜索，如</p>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/help.search.html">help.search</a></span><span class="op">(</span>keyword <span class="op">=</span> <span class="st">"character"</span>, package <span class="op">=</span> <span class="st">"base"</span><span class="op">)</span></code></pre></div>
<p><code>browseEnv</code> 函数用来在浏览器中查看当前环境下，对象的列表，默认环境是 <code><a href="https://rdrr.io/r/base/sys.parent.html">sys.frame()</a></code></p>
</div>
<div id="permissions" class="section level2" number="3.6">
<h2>
<span class="header-section-number">3.6</span> 文件权限<a class="anchor" aria-label="anchor" href="#permissions"><i class="fas fa-link"></i></a>
</h2>
<p>操作目录和文件的权限 Manipulation of Directories and File Permissions</p>
<ol style="list-style-type: decimal">
<li>
<p><code><a href="https://rdrr.io/r/base/files2.html">dir.exists(paths)</a></code> 检查目录是否存在</p>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'./_book'</span>,<span class="st">'./book'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/files2.html">dir.create(path, showWarnings = TRUE, recursive = FALSE, mode = "0777")</a></code> 创建目录</p>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="st">'./_book/tmp'</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/files2.html">Sys.chmod(paths, mode = "0777", use_umask = TRUE)</a></code> 修改权限</p>
<div class="sourceCode" id="cb133"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/files2.html">Sys.chmod</a></span><span class="op">(</span><span class="st">'./_book/tmp'</span><span class="op">)</span></code></pre></div>
</li>
<li><p><code><a href="https://rdrr.io/r/base/files2.html">Sys.umask(mode = NA)</a></code></p></li>
</ol>
</div>
<div id="locale" class="section level2" number="3.7">
<h2>
<span class="header-section-number">3.7</span> 区域设置<a class="anchor" aria-label="anchor" href="#locale"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<p><code><a href="https://rdrr.io/r/base/locales.html">Sys.getlocale(category = "LC_ALL")</a></code> 查看当前区域设置</p>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/locales.html">Sys.getlocale</a></span><span class="op">(</span>category <span class="op">=</span> <span class="st">"LC_ALL"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C"</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/locales.html">Sys.setlocale(category = "LC_ALL", locale = "")</a></code> 设置区域</p>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 默认设置</span>
<span class="fu"><a href="https://rdrr.io/r/base/locales.html">Sys.setlocale</a></span><span class="op">(</span>category <span class="op">=</span> <span class="st">"LC_ALL"</span>, locale <span class="op">=</span> <span class="st">""</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C"</code></pre>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 保存当前区域设置</span>
<span class="va">old</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/locales.html">Sys.getlocale</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/locales.html">Sys.setlocale</a></span><span class="op">(</span><span class="st">"LC_MONETARY"</span>, locale <span class="op">=</span> <span class="st">""</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "en_US.UTF-8"</code></pre>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.localeconv.html">Sys.localeconv</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>##     decimal_point     thousands_sep          grouping   int_curr_symbol 
##               "."                ""                ""            "USD " 
##   currency_symbol mon_decimal_point mon_thousands_sep      mon_grouping 
##               "$"               "."               ","        "\003\003" 
##     positive_sign     negative_sign   int_frac_digits       frac_digits 
##                ""               "-"               "2"               "2" 
##     p_cs_precedes    p_sep_by_space     n_cs_precedes    n_sep_by_space 
##               "1"               "0"               "1"               "0" 
##       p_sign_posn       n_sign_posn 
##               "1"               "1"</code></pre>
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/locales.html">Sys.setlocale</a></span><span class="op">(</span><span class="st">"LC_MONETARY"</span>, <span class="st">"de_AT"</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in Sys.setlocale("LC_MONETARY", "de_AT"): OS reports request to set
## locale to "de_AT" cannot be honored</code></pre>
<pre><code>## [1] ""</code></pre>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.localeconv.html">Sys.localeconv</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>##     decimal_point     thousands_sep          grouping   int_curr_symbol 
##               "."                ""                ""            "USD " 
##   currency_symbol mon_decimal_point mon_thousands_sep      mon_grouping 
##               "$"               "."               ","        "\003\003" 
##     positive_sign     negative_sign   int_frac_digits       frac_digits 
##                ""               "-"               "2"               "2" 
##     p_cs_precedes    p_sep_by_space     n_cs_precedes    n_sep_by_space 
##               "1"               "0"               "1"               "0" 
##       p_sign_posn       n_sign_posn 
##               "1"               "1"</code></pre>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 恢复区域设置</span>
<span class="fu"><a href="https://rdrr.io/r/base/locales.html">Sys.setlocale</a></span><span class="op">(</span>locale <span class="op">=</span> <span class="va">old</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in Sys.setlocale(locale = old): OS reports request to set locale to
## "LC_CTYPE=en_US.UTF-8;LC_NUMERIC=C;LC_TIME=en_US.UTF-8;LC_COLLATE=en_US.UTF-8;LC_MONETARY=en_US.UTF-8;LC_MESSAGES=en_US.UTF-8;LC_PAPER=en_US.UTF-8;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=en_US.UTF-8;LC_IDENTIFICATION=C"
## cannot be honored</code></pre>
<pre><code>## [1] ""</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/Sys.localeconv.html">Sys.localeconv()</a></code> 当前区域设置下，数字和货币的表示</p>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.localeconv.html">Sys.localeconv</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>##     decimal_point     thousands_sep          grouping   int_curr_symbol 
##               "."                ""                ""            "USD " 
##   currency_symbol mon_decimal_point mon_thousands_sep      mon_grouping 
##               "$"               "."               ","        "\003\003" 
##     positive_sign     negative_sign   int_frac_digits       frac_digits 
##                ""               "-"               "2"               "2" 
##     p_cs_precedes    p_sep_by_space     n_cs_precedes    n_sep_by_space 
##               "1"               "0"               "1"               "0" 
##       p_sign_posn       n_sign_posn 
##               "1"               "1"</code></pre>
<p>本地化信息</p>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/l10n_info.html">l10n_info</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## $MBCS
## [1] TRUE
## 
## $`UTF-8`
## [1] TRUE
## 
## $`Latin-1`
## [1] FALSE
## 
## $codeset
## [1] "UTF-8"</code></pre>
</li>
</ol>
</div>
<div id="process" class="section level2" number="3.8">
<h2>
<span class="header-section-number">3.8</span> 进程管理<a class="anchor" aria-label="anchor" href="#process"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://github.com/r-lib/ps">ps</a> 包用来查询进程信息</p>
<ul>
<li>
<p><code>Sys.getpid</code> 获取当前运行中的 R 控制台（会话）的进程 ID</p>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.getpid.html">Sys.getpid</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 22384</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/proc.time.html">proc.time()</a></code> R 会话运行时间，常用于计算R程序在当前R控制台的运行时间</p>
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">t1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/proc.time.html">proc.time</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">1e6</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/proc.time.html">proc.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="va">t1</span></code></pre></div>
<pre><code>##    user  system elapsed 
##   0.079   0.000   0.078</code></pre>
</li>
<li>
<p><code>system.time</code> 计算 R 表达式/程序块运行耗费的CPU时间</p>
<div class="sourceCode" id="cb158"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span><span class="op">(</span><span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">1e6</span><span class="op">)</span>
<span class="op">}</span>, gcFirst <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>##    user  system elapsed 
##   0.068   0.004   0.072</code></pre>
</li>
<li>
<p><code>gc.time</code> 报告垃圾回收耗费的时间</p>
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/gc.time.html">gc.time</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 0 0 0 0 0</code></pre>
</li>
</ul>
</div>
<div id="system-commands" class="section level2" number="3.9">
<h2>
<span class="header-section-number">3.9</span> 系统命令<a class="anchor" aria-label="anchor" href="#system-commands"><i class="fas fa-link"></i></a>
</h2>
<p><code>system</code> 和 <code>system2</code> 调用系统命令，推荐使用后者，它更灵活更便携。此外，Jeroen Ooms 开发的 <a href="https://github.com/jeroen/sys">sys 包</a> 可看作 <code><a href="https://rdrr.io/r/base/system2.html">base::system2</a></code> 的替代品</p>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">system</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/system.html">system</a></span><span class="op">(</span><span class="va">...</span>, intern <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">'\n'</span><span class="op">)</span>
<span class="va">system2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/system2.html">system2</a></span><span class="op">(</span><span class="va">...</span>, stdout <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/system.html">system</a></span><span class="op">(</span>command <span class="op">=</span> <span class="st">"xelatex --version"</span><span class="op">)</span></code></pre></div>
<pre><code>## XeTeX 3.141592653-2.6-0.999993 (TeX Live 2021)
## kpathsea version 6.3.3
## Copyright 2021 SIL International, Jonathan Kew and Khaled Hosny.
## There is NO warranty.  Redistribution of this software is
## covered by the terms of both the XeTeX copyright and
## the Lesser GNU General Public License.
## For more information about these matters, see the file
## named COPYING and the XeTeX source.
## Primary author of XeTeX: Jonathan Kew.
## Compiled with ICU version 68.2; using 68.2
## Compiled with zlib version 1.2.11; using 1.2.11
## Compiled with FreeType2 version 2.10.4; using 2.10.4
## Compiled with Graphite2 version 1.3.14; using 1.3.14
## Compiled with HarfBuzz version 2.7.4; using 2.7.4
## Compiled with libpng version 1.6.37; using 1.6.37
## Compiled with pplib version v2.05 less toxic i hope
## Compiled with fontconfig version 2.11.0; using 2.13.1</code></pre>
<div class="sourceCode" id="cb165"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/system2.html">system2</a></span><span class="op">(</span>command <span class="op">=</span> <span class="st">'pdflatex'</span>, args <span class="op">=</span> <span class="st">'--version'</span><span class="op">)</span></code></pre></div>
<pre><code>## pdfTeX 3.141592653-2.6-1.40.23 (TeX Live 2021)
## kpathsea version 6.3.3
## Copyright 2021 Han The Thanh (pdfTeX) et al.
## There is NO warranty.  Redistribution of this software is
## covered by the terms of both the pdfTeX copyright and
## the Lesser GNU General Public License.
## For more information about these matters, see the file
## named COPYING and the pdfTeX source.
## Primary author of pdfTeX: Han The Thanh (pdfTeX) et al.
## Compiled with libpng 1.6.37; using libpng 1.6.37
## Compiled with zlib 1.2.11; using zlib 1.2.11
## Compiled with xpdf version 4.03</code></pre>
</div>
<div id="time" class="section level2" number="3.10">
<h2>
<span class="header-section-number">3.10</span> 时间管理<a class="anchor" aria-label="anchor" href="#time"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<p><code>Sys.timezone</code> 获取时区信息</p>
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/timezones.html">Sys.timezone</a></span><span class="op">(</span>location <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "UTC"</code></pre>
</li>
<li>
<p><code>Sys.time</code> 系统时间，可以给定时区下，显示当前时间，精确到秒，返回数据类型为 <code>POSIXct</code></p>
<div class="sourceCode" id="cb169"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 此时美国洛杉矶时间</span>
<span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, tz <span class="op">=</span> <span class="st">'America/Los_Angeles'</span>, usetz <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2021-08-10 02:49:00 PDT"</code></pre>
<div class="sourceCode" id="cb171"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 此时加拿大东部时间</span>
<span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, tz <span class="op">=</span> <span class="st">'Canada/Eastern'</span>, usetz <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2021-08-10 05:49:00 EDT"</code></pre>
</li>
<li>
<p><code>Sys.Date</code> 显示当前时区下的日期，精确到日，返回数据类型为 <code>date</code></p>
<div class="sourceCode" id="cb173"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2021-08-10"</code></pre>
</li>
<li>
<p><code>date</code> 返回当前系统日期和时间，数据类型是字符串</p>
<div class="sourceCode" id="cb175"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/date.html">date</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Tue Aug 10 09:49:00 2021"</code></pre>
<div class="sourceCode" id="cb177"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## 也可以这样表示</span>
<span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"%a %b %d %H:%M:%S %Y"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Tue Aug 10 09:49:00 2021"</code></pre>
</li>
<li>
<p><code>as.POSIX*</code> 是一个 Date-time 转换函数</p>
<div class="sourceCode" id="cb179"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXlt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"GMT"</span><span class="op">)</span> <span class="co"># the current time in GMT</span></code></pre></div>
<pre><code>## [1] "2021-08-10 09:49:00 GMT"</code></pre>
</li>
<li>
<p>时间计算</p>
<div class="sourceCode" id="cb181"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>             <span class="co"># the current date, as class "POSIXct"</span></code></pre></div>
<pre><code>## [1] "2021-08-10 09:49:00 UTC"</code></pre>
<div class="sourceCode" id="cb183"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">3600</span>             <span class="co"># an hour ago</span></code></pre></div>
<pre><code>## [1] "2021-08-10 08:49:00 UTC"</code></pre>
</li>
<li>
<p><code>.leap.seconds</code> 是内置的日期序列</p>
<div class="sourceCode" id="cb185"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">.leap.seconds</span></code></pre></div>
<pre><code>##  [1] "1972-07-01 GMT" "1973-01-01 GMT" "1974-01-01 GMT" "1975-01-01 GMT"
##  [5] "1976-01-01 GMT" "1977-01-01 GMT" "1978-01-01 GMT" "1979-01-01 GMT"
##  [9] "1980-01-01 GMT" "1981-07-01 GMT" "1982-07-01 GMT" "1983-07-01 GMT"
## [13] "1985-07-01 GMT" "1988-01-01 GMT" "1990-01-01 GMT" "1991-01-01 GMT"
## [17] "1992-07-01 GMT" "1993-07-01 GMT" "1994-07-01 GMT" "1996-01-01 GMT"
## [21] "1997-07-01 GMT" "1999-01-01 GMT" "2006-01-01 GMT" "2009-01-01 GMT"
## [25] "2012-07-01 GMT" "2015-07-01 GMT" "2017-01-01 GMT"</code></pre>
<p>计算日期对应的星期<code>weekdays</code>，月 <code>months</code> 和季度 <code>quarters</code></p>
<div class="sourceCode" id="cb187"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">weekdays</a></span><span class="op">(</span><span class="va">.leap.seconds</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "Saturday"  "Monday"    "Tuesday"   "Wednesday" "Thursday"  "Saturday" 
##  [7] "Sunday"    "Monday"    "Tuesday"   "Wednesday" "Thursday"  "Friday"   
## [13] "Monday"    "Friday"    "Monday"    "Tuesday"   "Wednesday" "Thursday" 
## [19] "Friday"    "Monday"    "Tuesday"   "Friday"    "Sunday"    "Thursday" 
## [25] "Sunday"    "Wednesday" "Sunday"</code></pre>
<div class="sourceCode" id="cb189"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">months</a></span><span class="op">(</span><span class="va">.leap.seconds</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "July"    "January" "January" "January" "January" "January" "January"
##  [8] "January" "January" "July"    "July"    "July"    "July"    "January"
## [15] "January" "January" "July"    "July"    "July"    "January" "July"   
## [22] "January" "January" "January" "July"    "July"    "January"</code></pre>
<div class="sourceCode" id="cb191"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/weekday.POSIXt.html">quarters</a></span><span class="op">(</span><span class="va">.leap.seconds</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "Q3" "Q1" "Q1" "Q1" "Q1" "Q1" "Q1" "Q1" "Q1" "Q3" "Q3" "Q3" "Q3" "Q1" "Q1"
## [16] "Q1" "Q3" "Q3" "Q3" "Q1" "Q3" "Q1" "Q1" "Q1" "Q3" "Q3" "Q1"</code></pre>
</li>
<li>
<p><code><a href="https://rdrr.io/r/base/Sys.setFileTime.html">Sys.setFileTime()</a></code> 使用系统调用 system call 设置文件或目录的时间</p>
<div class="sourceCode" id="cb193"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 修改时间前</span>
<span class="fu"><a href="https://rdrr.io/r/base/file.info.html">file.info</a></span><span class="op">(</span><span class="st">'./_common.R'</span><span class="op">)</span></code></pre></div>
<pre><code>##             size isdir mode               mtime               ctime
## ./_common.R 1775 FALSE  644 2021-08-10 09:29:35 2021-08-10 09:29:35
##                           atime  uid gid  uname grname
## ./_common.R 2021-08-10 09:48:53 1001 121 runner docker</code></pre>
<div class="sourceCode" id="cb195"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 修改时间后，对比一下</span>
<span class="fu"><a href="https://rdrr.io/r/base/Sys.setFileTime.html">Sys.setFileTime</a></span><span class="op">(</span>path <span class="op">=</span> <span class="st">'./_common.R'</span>, time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/file.info.html">file.info</a></span><span class="op">(</span><span class="st">'./_common.R'</span><span class="op">)</span></code></pre></div>
<pre><code>##             size isdir mode               mtime               ctime
## ./_common.R 1775 FALSE  644 2021-08-10 09:49:00 2021-08-10 09:49:00
##                           atime  uid gid  uname grname
## ./_common.R 2021-08-10 09:49:00 1001 121 runner docker</code></pre>
</li>
<li>
<p><code>strptime</code> 用于字符串与 <code>POSIXlt</code>、 <code>POSIXct</code> 类对象之间的转化，<code>format</code> 默认 <code>tz = ""</code> 且 <code>usetz = TRUE</code></p>
<div class="sourceCode" id="cb197"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 存放时区信息的数据库所在目录</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Rhome.html">R.home</a></span><span class="op">(</span><span class="st">"share"</span><span class="op">)</span>, <span class="st">"zoneinfo"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<div class="sourceCode" id="cb199"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 比较不同的打印方式</span>
<span class="fu"><a href="https://rdrr.io/r/base/strptime.html">strptime</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, format <span class="op">=</span><span class="st">"%Y-%m-%d %H:%M:%S"</span>, tz <span class="op">=</span> <span class="st">"Asia/Taipei"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2021-08-10 09:49:00 CST"</code></pre>
<div class="sourceCode" id="cb201"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"%Y-%m-%d %H:%M:%S"</span><span class="op">)</span> <span class="co"># 默认情形</span></code></pre></div>
<pre><code>## [1] "2021-08-10 09:49:00"</code></pre>
<div class="sourceCode" id="cb203"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>, format <span class="op">=</span> <span class="st">"%Y-%m-%d %H:%M:%S"</span>, tz <span class="op">=</span> <span class="st">"Asia/Taipei"</span>, usetz <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2021-08-10 17:49:00 CST"</code></pre>
</li>
<li>
<p>设置时区</p>
<div class="sourceCode" id="cb205"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/timezones.html">Sys.timezone</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "UTC"</code></pre>
<div class="sourceCode" id="cb207"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv</a></span><span class="op">(</span>TZ <span class="op">=</span> <span class="st">"Asia/Shanghai"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/timezones.html">Sys.timezone</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Asia/Shanghai"</code></pre>
<p>全局修改，在文件 /opt/R/4.1.0/lib/R/etc/Rprofile.site 内添加<code><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv(TZ="Asia/Shanghai")</a></code>。 局部修改，就是在本地R项目下，创建 <code>.Rprofile</code>，然后同样添加 <code><a href="https://rdrr.io/r/base/Sys.setenv.html">Sys.setenv(TZ="Asia/Shanghai")</a></code>。</p>
</li>
</ol>
</div>
<div id="package" class="section level2" number="3.11">
<h2>
<span class="header-section-number">3.11</span> R 包管理<a class="anchor" aria-label="anchor" href="#package"><i class="fas fa-link"></i></a>
</h2>
<p>相关的函数大致有</p>
<div class="sourceCode" id="cb209"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/apropos.html">apropos</a></span><span class="op">(</span><span class="st">'package'</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] ".packages"                      ".packageStartupMessage"        
##  [3] "$.package_version"              "as.package_version"            
##  [5] "aspell_package_C_files"         "aspell_package_R_files"        
##  [7] "aspell_package_Rd_files"        "aspell_package_vignettes"      
##  [9] "available.packages"             "download.packages"             
## [11] "find.package"                   "findPackageEnv"                
## [13] "format.packageInfo"             "getPackageName"                
## [15] "install.packages"               "installed.packages"            
## [17] "is.package_version"             "make.packages.html"            
## [19] "methodsPackageMetaName"         "new.packages"                  
## [21] "old.packages"                   "package_version"               
## [23] "package.skeleton"               "packageDate"                   
## [25] "packageDescription"             "packageEvent"                  
## [27] "packageHasNamespace"            "packageName"                   
## [29] "packageNotFoundError"           "packageSlot"                   
## [31] "packageSlot&lt;-"                  "packageStartupMessage"         
## [33] "packageStatus"                  "packageVersion"                
## [35] "path_package"                   "path.package"                  
## [37] "print.packageInfo"              "promptPackage"                 
## [39] "remove.packages"                "setPackageName"                
## [41] "suppressPackageStartupMessages" "update.packages"</code></pre>
<ol style="list-style-type: decimal">
<li>
<p><code><a href="https://rdrr.io/r/base/zpackages.html">.packages(T)</a></code> 已安装的 R 包</p>
<div class="sourceCode" id="cb211"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/zpackages.html">.packages</a></span><span class="op">(</span><span class="cn">T</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 449</code></pre>
</li>
<li>
<p><code>available.packages</code> 查询可用的 R 包</p>
<div class="sourceCode" id="cb213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/available.packages.html">available.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span>,<span class="st">"Package"</span><span class="op">]</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>##         A3      aaSEA   AATtools     ABACUS     abbyyR        abc 
##       "A3"    "aaSEA" "AATtools"   "ABACUS"   "abbyyR"      "abc"</code></pre>
<p>查询 repos 的 R 包</p>
<div class="sourceCode" id="cb215"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">rforge</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/available.packages.html">available.packages</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="st">"https://r-forge.r-project.org/"</span><span class="op">)</span>
<span class="va">cran</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/available.packages.html">available.packages</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="st">"https://mirrors.tuna.tsinghua.edu.cn/CRAN/"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/sets.html">setdiff</a></span><span class="op">(</span><span class="va">rforge</span><span class="op">[</span>, <span class="st">"Package"</span><span class="op">]</span>, <span class="va">cran</span><span class="op">[</span>, <span class="st">"Package"</span><span class="op">]</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p><code>download.packages</code> 下载 R 包</p>
<div class="sourceCode" id="cb216"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/download.packages.html">download.packages</a></span><span class="op">(</span><span class="st">"Rbooks"</span>, destdir <span class="op">=</span> <span class="st">"~/"</span>, repos <span class="op">=</span> <span class="st">"https://r-forge.r-project.org/"</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p><code>install.packages</code> 安装 R 包</p>
<div class="sourceCode" id="cb217"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"rmarkdown"</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p><code>installed.packages</code> 已安装的 R 包</p>
<div class="sourceCode" id="cb218"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html">installed.packages</a></span><span class="op">(</span>fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Package"</span>,<span class="st">"Version"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p><code>remove.packages</code> 卸载/删除/移除已安装的R包</p>
<div class="sourceCode" id="cb219"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/remove.packages.html">remove.packages</a></span><span class="op">(</span><span class="st">'rmarkdown'</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p><code>update.packages</code> 更新已安装的 R 包</p>
<div class="sourceCode" id="cb220"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/update.packages.html">update.packages</a></span><span class="op">(</span>ask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
</li>
<li>
<p><code>old.packages</code> 查看过时/可更新的 R 包</p>
<div class="sourceCode" id="cb221"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/update.packages.html">old.packages</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>##          Package    LibPath                           Installed Built  
## sysfonts "sysfonts" "/home/runner/work/_temp/Library" "0.8.4"   "4.1.0"
## Matrix   "Matrix"   "/opt/R/4.1.0/lib/R/library"      "1.3-3"   "4.1.0"
## mgcv     "mgcv"     "/opt/R/4.1.0/lib/R/library"      "1.8-35"  "4.1.0"
##          ReposVer Repository                               
## sysfonts "0.8.5"  "https://cloud.r-project.org/src/contrib"
## Matrix   "1.3-4"  "https://cloud.r-project.org/src/contrib"
## mgcv     "1.8-36" "https://cloud.r-project.org/src/contrib"</code></pre>
</li>
<li>
<p><code>new.packages</code> 还没有安装的 R 包</p>
<div class="sourceCode" id="cb223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/update.packages.html">new.packages</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "A3"       "aaSEA"    "AATtools" "ABACUS"   "abbyyR"   "abc"</code></pre>
</li>
<li>
<p><code>packageStatus</code> 查看已安装的 R 包状态，可更新、可下载等</p>
<div class="sourceCode" id="cb225"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/packageStatus.html">packageStatus</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## Number of installed packages:
##                                  
##                                    ok upgrade unavailable
##   /home/runner/work/_temp/Library 410       1          11
##   /opt/R/4.1.0/lib/R/library       27       2           0
## 
## Number of available packages (each package counted only once):
##                                          
##                                           installed not installed
##   https://cloud.r-project.org/src/contrib       424         17548</code></pre>
</li>
<li>
<p><code>packageDescription</code> 查询 R 包描述信息</p>
<div class="sourceCode" id="cb227"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html">packageDescription</a></span><span class="op">(</span><span class="st">'graphics'</span><span class="op">)</span></code></pre></div>
<pre><code>## Package: graphics
## Version: 4.1.0
## Priority: base
## Title: The R Graphics Package
## Author: R Core Team and contributors worldwide
## Maintainer: R Core Team &lt;do-use-Contact-address@r-project.org&gt;
## Contact: R-help mailing list &lt;r-help@r-project.org&gt;
## Description: R functions for base graphics.
## Imports: grDevices
## License: Part of R 4.1.0
## NeedsCompilation: yes
## Built: R 4.1.0; x86_64-pc-linux-gnu; 2021-05-18 09:04:19 UTC; unix
## 
## -- File: /opt/R/4.1.0/lib/R/library/graphics/Meta/package.rds</code></pre>
</li>
<li>
<p>查询 R 包的依赖关系</p>
<div class="sourceCode" id="cb229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># rmarkdown 依赖的 R 包</span>
<span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/package_dependencies.html">package_dependencies</a></span><span class="op">(</span><span class="st">'rmarkdown'</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>## $rmarkdown
##  [1] "tools"     "utils"     "knitr"     "yaml"      "htmltools" "evaluate" 
##  [7] "jsonlite"  "tinytex"   "xfun"      "methods"   "stringr"   "digest"   
## [13] "grDevices" "base64enc" "rlang"     "highr"     "markdown"  "glue"     
## [19] "magrittr"  "stringi"   "stats"     "mime"</code></pre>
<div class="sourceCode" id="cb231"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># 依赖 rmarkdown 的 R 包</span>
<span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/dependsOnPkgs.html">dependsOnPkgs</a></span><span class="op">(</span><span class="st">'rmarkdown'</span>, recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "bookdown"      "flexdashboard" "formattable"   "hrbrthemes"   
##  [5] "kableExtra"    "prettydoc"     "reprex"        "tint"         
##  [9] "xaringan"      "tidyverse"     "projpred"      "brms"</code></pre>
<p>ggplot2 生态，仅列出以 gg 开头的 R 包</p>
<div class="sourceCode" id="cb233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/available.packages.html">available.packages</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">gg</span> <span class="op">&lt;-</span> <span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/dependsOnPkgs.html">dependsOnPkgs</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span>, installed <span class="op">=</span> <span class="va">pdb</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"^gg"</span>, <span class="va">gg</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>##   [1] "gg.gap"            "ggallin"           "ggalluvial"       
##   [4] "ggalt"             "gganimate"         "ggasym"           
##   [7] "ggbeeswarm"        "ggborderline"      "ggbreak"          
##  [10] "ggBubbles"         "ggbuildr"          "ggbump"           
##  [13] "ggcharts"          "ggChernoff"        "ggconf"           
##  [16] "ggcorrplot"        "ggdag"             "ggdark"           
##  [19] "ggDCA"             "ggdemetra"         "ggdendro"         
##  [22] "ggdist"            "ggdmc"             "ggeasy"           
##  [25] "ggedit"            "ggenealogy"        "ggetho"           
##  [28] "ggExtra"           "ggfan"             "ggfittext"        
##  [31] "ggfocus"           "ggforce"           "ggformula"        
##  [34] "ggfortify"         "ggfun"             "ggfx"             
##  [37] "gggap"             "gggenes"           "ggghost"          
##  [40] "gggibbous"         "ggguitar"          "ggh4x"            
##  [43] "gghalfnorm"        "gghalves"          "ggheatmap"        
##  [46] "gghighlight"       "gghilbertstrings"  "ggimage"          
##  [49] "ggimg"             "gginference"       "gginnards"        
##  [52] "ggip"              "ggiraph"           "ggiraphExtra"     
##  [55] "ggjoy"             "gglm"              "gglogo"           
##  [58] "ggloop"            "gglorenz"          "ggmap"            
##  [61] "ggmcmc"            "ggmosaic"          "ggmsa"            
##  [64] "ggmuller"          "ggmulti"           "ggnetwork"        
##  [67] "ggnewscale"        "ggnormalviolin"    "ggnuplot"         
##  [70] "ggpacman"          "ggpage"            "ggparallel"       
##  [73] "ggparliament"      "ggparty"           "ggperiodic"       
##  [76] "ggplot.multistats" "ggplotAssist"      "ggplotgui"        
##  [79] "ggplotify"         "ggplotlyExtra"     "ggpmisc"          
##  [82] "ggPMX"             "ggpointdensity"    "ggpol"            
##  [85] "ggpolypath"        "ggpp"              "ggprism"          
##  [88] "ggpubr"            "ggpval"            "ggQC"             
##  [91] "ggQQunif"          "ggquickeda"        "ggquiver"         
##  [94] "ggRandomForests"   "ggraph"            "ggraptR"          
##  [97] "ggrasp"            "ggrastr"           "ggrepel"          
## [100] "ggResidpanel"      "ggridges"          "ggrisk"           
## [103] "ggROC"             "ggsci"             "ggseas"           
## [106] "ggseqlogo"         "ggshadow"          "ggside"           
## [109] "ggsignif"          "ggsn"              "ggsoccer"         
## [112] "ggsolvencyii"      "ggsom"             "ggspatial"        
## [115] "ggspectra"         "ggstance"          "ggstar"           
## [118] "ggstatsplot"       "ggstream"          "ggstudent"        
## [121] "ggswissmaps"       "ggtern"            "ggtext"           
## [124] "ggThemeAssist"     "ggthemes"          "ggupset"          
## [127] "ggvenn"            "ggVennDiagram"     "ggvoronoi"        
## [130] "ggwordcloud"       "ggx"</code></pre>
</li>
<li>
<p>重装R包，与 R 版本号保持一致</p>
<div class="sourceCode" id="cb235"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html">installed.packages</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">db</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">db</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">pkgs</span> <span class="op">&lt;-</span> <span class="va">db</span><span class="op">[</span><span class="va">db</span><span class="op">$</span><span class="va">Built</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html">getRversion</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Package"</span><span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">pkgs</span><span class="op">)</span></code></pre></div>
</li>
</ol>
</div>
<div id="lookup-function" class="section level2" number="3.12">
<h2>
<span class="header-section-number">3.12</span> 查找函数<a class="anchor" aria-label="anchor" href="#lookup-function"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://github.com/jimhester/lookup">lookup</a> R 函数完整定义，包括编译的代码，S3 和 S4 方法。目前 lookup 包处于开发版，我们可以用 <code><a href="https://remotes.r-lib.org/reference/install_github.html">remotes::install_github</a></code> 函数来安装它</p>
<div class="sourceCode" id="cb236"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"jimhester/lookup"</span><span class="op">)</span></code></pre></div>
<p>R-level 的源代码都可以直接看</p>
<div class="sourceCode" id="cb237"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">body</span></code></pre></div>
<pre><code>## function (fun = sys.function(sys.parent())) 
## {
##     if (is.character(fun)) 
##         fun &lt;- get(fun, mode = "function", envir = parent.frame())
##     .Internal(body(fun))
## }
## &lt;bytecode: 0x561bc9627778&gt;
## &lt;environment: namespace:base&gt;</code></pre>
<p>此外，<code>lookup</code> 可以定位到 C-level 的源代码，需要联网才能查看，lookup 基于 Winston Chang 在 Github 上维护的 <a href="https://github.com/wch/r-source">R 源码镜像</a></p>
<div class="sourceCode" id="cb239"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">lookup</span><span class="op">(</span><span class="va">body</span><span class="op">)</span></code></pre></div>
<pre><code>base::body [closure] 
function (fun = sys.function(sys.parent())) 
{
    if (is.character(fun)) 
        fun &lt;- get(fun, mode = "function", envir = parent.frame())
    .Internal(body(fun))
}
&lt;bytecode: 0x00000000140d6158&gt;
&lt;environment: namespace:base&gt;
// c source: src/main/builtin.c#L264-L277
SEXP attribute_hidden do_body(SEXP call, SEXP op, SEXP args, SEXP rho)
{
    checkArity(op, args);
    if (TYPEOF(CAR(args)) == CLOSXP) {
        SEXP b = BODY_EXPR(CAR(args));
        RAISE_NAMED(b, NAMED(CAR(args)));
        return b;
    } else {
        if(!(TYPEOF(CAR(args)) == BUILTINSXP ||
             TYPEOF(CAR(args)) == SPECIALSXP))
            warningcall(call, _("argument is not a function"));
        return R_NilValue;
    }
}</code></pre>
</div>
<div id="files-session-info" class="section level2" number="3.13">
<h2>
<span class="header-section-number">3.13</span> 运行环境<a class="anchor" aria-label="anchor" href="#files-session-info"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb241"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">xfun</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/xfun/man/session_info.html">session_info</a></span><span class="op">(</span>packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"magrittr"</span>, <span class="st">"fs"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## R version 4.1.0 (2021-05-18)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 20.04.2 LTS
## 
## Locale:
##   LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
##   LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
##   LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
##   LC_PAPER=en_US.UTF-8       LC_NAME=C                 
##   LC_ADDRESS=C               LC_TELEPHONE=C            
##   LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       
## 
## Package version:
##   fs_1.5.0        graphics_4.1.0  grDevices_4.1.0 magrittr_2.0.1 
##   methods_4.1.0   stats_4.1.0     utils_4.1.0</code></pre>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="chap-notations.html"><span class="header-section-number">2</span> 符号说明</a></div>
<div class="next"><a href="chap-data-structure.html"><span class="header-section-number">4</span> 数据结构</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#chap-file-operations"><span class="header-section-number">3</span> 文件操作</a></li>
<li><a class="nav-link" href="#list"><span class="header-section-number">3.1</span> 查看文件</a></li>
<li><a class="nav-link" href="#manipulation"><span class="header-section-number">3.2</span> 操作文件</a></li>
<li><a class="nav-link" href="#compression"><span class="header-section-number">3.3</span> 压缩文件</a></li>
<li><a class="nav-link" href="#paths"><span class="header-section-number">3.4</span> 路径操作</a></li>
<li><a class="nav-link" href="#find"><span class="header-section-number">3.5</span> 查找文件</a></li>
<li><a class="nav-link" href="#permissions"><span class="header-section-number">3.6</span> 文件权限</a></li>
<li><a class="nav-link" href="#locale"><span class="header-section-number">3.7</span> 区域设置</a></li>
<li><a class="nav-link" href="#process"><span class="header-section-number">3.8</span> 进程管理</a></li>
<li><a class="nav-link" href="#system-commands"><span class="header-section-number">3.9</span> 系统命令</a></li>
<li><a class="nav-link" href="#time"><span class="header-section-number">3.10</span> 时间管理</a></li>
<li><a class="nav-link" href="#package"><span class="header-section-number">3.11</span> R 包管理</a></li>
<li><a class="nav-link" href="#lookup-function"><span class="header-section-number">3.12</span> 查找函数</a></li>
<li><a class="nav-link" href="#files-session-info"><span class="header-section-number">3.13</span> 运行环境</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/XiangyunHuang/masr/blob/master/file-operations.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/XiangyunHuang/masr/edit/master/file-operations.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>现代应用统计与 R 语言</strong>" was written by 黄湘云. It was last built on 2021-08-10.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
